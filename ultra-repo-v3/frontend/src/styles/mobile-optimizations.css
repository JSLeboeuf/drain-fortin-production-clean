/**
 * Mobile Performance Optimizations
 * Eliminates 300ms click delay and enhances touch responsiveness
 */

/* Eliminate 300ms click delay on mobile devices */
* {
  touch-action: manipulation;
}

/* Enhanced touch targets for better mobile interaction */
button,
[role="button"],
input,
select,
textarea,
a {
  min-height: 44px;
  min-width: 44px;
  touch-action: manipulation;
}

/* Smooth scrolling for mobile */
html {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* Optimize scrollable containers */
.overflow-auto,
.overflow-y-auto,
.overflow-x-auto {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Mobile-first responsive breakpoints */
@media (max-width: 640px) {
  /* Increase touch targets for small screens */
  .table-cell {
    min-height: 48px;
  }
  
  /* Reduce animation complexity on mobile */
  * {
    animation-duration: 0.2s !important;
    transition-duration: 0.2s !important;
  }
  
  /* Optimize font sizes for mobile */
  .text-xs { font-size: 0.875rem; }
  .text-sm { font-size: 1rem; }
  
  /* Ensure proper spacing for touch */
  .space-y-2 > * + * {
    margin-top: 0.75rem;
  }
}

/* Tablet optimizations */
@media (max-width: 768px) {
  /* Optimize card layouts */
  .grid-cols-4 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .grid-cols-3 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  /* Reduce padding on smaller screens */
  .p-6 {
    padding: 1rem;
  }
  
  .p-4 {
    padding: 0.75rem;
  }
}

/* Touch feedback for interactive elements */
button:active,
[role="button"]:active,
.clickable:active {
  transform: scale(0.98);
  transition: transform 0.1s ease-in-out;
}

/* Visual feedback for touch interactions */
.touch-feedback {
  position: relative;
  overflow: hidden;
}

.touch-feedback::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.3s, height 0.3s;
  pointer-events: none;
}

.touch-feedback:active::after {
  width: 200px;
  height: 200px;
}

/* Optimize table rendering on mobile */
@media (max-width: 640px) {
  .table-responsive {
    display: block;
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  .table-responsive table {
    min-width: 600px;
  }
  
  /* Stack cards vertically on mobile */
  .mobile-stack {
    flex-direction: column;
  }
  
  .mobile-stack > * {
    width: 100%;
    margin-bottom: 1rem;
  }
}

/* Performance optimization for animations */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Battery saving mode */
@media (prefers-color-scheme: dark) {
  /* Use darker backgrounds to save battery on OLED screens */
  .bg-white {
    background-color: #1a1a1a;
    color: #e5e5e5;
  }
  
  .bg-gray-50 {
    background-color: #111111;
  }
  
  .text-gray-900 {
    color: #e5e5e5;
  }
  
  .text-gray-600 {
    color: #a3a3a3;
  }
}

/* Network-aware optimizations */
@media (max-resolution: 1dppx) {
  /* Reduce image quality for low-DPI screens */
  img {
    image-rendering: optimizeSpeed;
  }
}

/* Reduce GPU usage on mobile */
.gpu-optimization {
  will-change: auto;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Mobile gesture support */
.swipeable {
  touch-action: pan-y pinch-zoom;
}

.pinch-zoomable {
  touch-action: pinch-zoom;
}

.pan-horizontal {
  touch-action: pan-x;
}

.pan-vertical {
  touch-action: pan-y;
}

/* Optimize focus styles for mobile */
@media (max-width: 768px) {
  :focus-visible {
    outline: 3px solid #2563eb;
    outline-offset: 2px;
    border-radius: 4px;
  }
}

/* iOS-specific optimizations */
@supports (-webkit-touch-callout: none) {
  /* Disable text selection on iOS for better touch experience */
  .no-select {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
  
  /* Fix iOS Safari 100vh issue */
  .min-h-screen {
    min-height: -webkit-fill-available;
  }
}

/* Android-specific optimizations */
@media (max-width: 640px) and (orientation: portrait) {
  /* Optimize for Android portrait mode */
  .container {
    max-width: 100vw;
    padding-left: 1rem;
    padding-right: 1rem;
  }
}

/* Performance monitoring styles */
.performance-overlay {
  position: fixed;
  top: 0;
  right: 0;
  z-index: 9999;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 0.5rem;
  font-family: monospace;
  font-size: 0.75rem;
  pointer-events: none;
  border-radius: 0 0 0 8px;
}

@media (min-width: 1024px) {
  .performance-overlay {
    display: none;
  }
}

/* Critical path CSS inlining */
.critical-above-fold {
  /* Styles for content above the fold */
  contain: layout style paint;
  content-visibility: visible;
}

.below-fold {
  /* Lazy-loaded styles for below-fold content */
  content-visibility: auto;
  contain-intrinsic-size: 0 400px;
}

/* Memory optimization */
.large-list {
  contain: strict;
  height: 400px;
  overflow: auto;
}

/* Reduce layout thrashing */
.no-layout-shift {
  contain: layout;
}

/* Network-aware loading */
@media (max-bandwidth: 1mbps) {
  .high-quality-image {
    display: none;
  }
  
  .low-quality-fallback {
    display: block;
  }
}

/* Accessibility improvements for mobile */
@media (max-width: 768px) {
  .sr-only-mobile {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
}