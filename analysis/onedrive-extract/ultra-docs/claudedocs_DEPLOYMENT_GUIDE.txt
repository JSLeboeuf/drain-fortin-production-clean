# üöÄ GUIDE DE D√âPLOIEMENT PRODUCTION
## Drain Fortin - Frontend & Backend
### Date: 2025-09-09

---

## ‚úÖ D√âPLOIEMENT R√âUSSI!

### URL de Production Actuelle
üåê **https://phiduqxcufdmgjvdipyu.supabase.co/storage/v1/object/public/web-app/drain-fortin/index.html**

Le frontend est maintenant d√©ploy√© et accessible en ligne!

---

## üìã OPTIONS DE D√âPLOIEMENT

### Option 1: Supabase Storage (ACTUEL) ‚úÖ
- **Statut**: D√©ploy√©
- **URL**: https://phiduqxcufdmgjvdipyu.supabase.co/storage/v1/object/public/web-app/drain-fortin/index.html
- **Avantages**: 
  - Gratuit avec Pro plan
  - M√™me infrastructure
  - Pas de service externe
- **Inconv√©nients**:
  - URL longue
  - Pas de domaine custom direct
  - Performance moyenne

### Option 2: Vercel (RECOMMAND√â) ‚≠ê
```bash
# Installation Vercel CLI
npm i -g vercel

# Dans le dossier frontend/
cd frontend
vercel

# Suivre les prompts:
# - Link to existing project? No
# - What's your project name? drain-fortin
# - In which directory? ./
# - Override settings? No
```

**Avantages**:
- URL courte: drain-fortin.vercel.app
- Domaine custom gratuit
- CDN global ultra-rapide
- Analytics inclus
- CI/CD automatique avec GitHub

### Option 3: Netlify
```bash
# Installation Netlify CLI
npm i -g netlify-cli

# Dans le dossier frontend/
cd frontend
netlify deploy --prod
```

**Avantages**:
- Similar √† Vercel
- Forms handling gratuit
- Split testing A/B
- Edge functions

---

## üîß CONFIGURATION DOMAINE PERSONNALIS√â

### Pour drainfortin.com

#### Avec Vercel:
1. Dashboard Vercel ‚Üí Settings ‚Üí Domains
2. Add Domain: drainfortin.com
3. DNS Records chez votre registrar:
   ```
   A     @     76.76.21.21
   CNAME www   cname.vercel-dns.com
   ```

#### Avec Supabase Direct:
1. Cr√©er un proxy Cloudflare
2. R√®gles de redirection vers URL Supabase
3. Plus complexe mais possible

---

## üì± OPTIMISATIONS PRODUCTION

### Variables d'Environnement
```env
# Production (.env.production)
VITE_SUPABASE_URL=https://phiduqxcufdmgjvdipyu.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
VITE_VAPI_PUBLIC_KEY=0b3484a1-b71b-4135-8723-4e58c6a8af5a
VITE_VAPI_PHONE_NUMBER=+14502803222
VITE_API_URL=https://phiduqxcufdmgjvdipyu.supabase.co/functions/v1
```

### Performance
```javascript
// vite.config.ts optimizations
build: {
  rollupOptions: {
    output: {
      manualChunks: {
        'react-vendor': ['react', 'react-dom'],
        'supabase-vendor': ['@supabase/supabase-js'],
        'ui-vendor': ['@headlessui/react', 'framer-motion']
      }
    }
  },
  minify: 'terser',
  terserOptions: {
    compress: {
      drop_console: true,
      drop_debugger: true
    }
  }
}
```

### S√©curit√© Headers
```javascript
// D√©j√† configur√© dans vercel.json
headers: [
  {
    "key": "Content-Security-Policy",
    "value": "default-src 'self'; connect-src 'self' https://*.supabase.co wss://*.supabase.co"
  },
  {
    "key": "Strict-Transport-Security",
    "value": "max-age=63072000; includeSubDomains; preload"
  }
]
```

---

## üîÑ MISE √Ä JOUR DU D√âPLOIEMENT

### Supabase Storage
```bash
# Rebuild
cd frontend && npm run build

# Redeploy
cd .. && node deploy-to-supabase.js
```

### Vercel (Auto avec Git)
```bash
git add .
git commit -m "Update frontend"
git push origin main
# D√©ploiement automatique!
```

### Script Rapide
```bash
# deploy.sh
#!/bin/bash
echo "üöÄ D√©ploiement en cours..."
cd frontend
npm run build
cd ..
node deploy-to-supabase.js
echo "‚úÖ D√©ploiement termin√©!"
```

---

## üìä MONITORING PRODUCTION

### Supabase Dashboard
- **Logs**: https://supabase.com/dashboard/project/phiduqxcufdmgjvdipyu/logs
- **Metrics**: https://supabase.com/dashboard/project/phiduqxcufdmgjvdipyu/reports
- **Functions**: https://supabase.com/dashboard/project/phiduqxcufdmgjvdipyu/functions

### Monitoring External
```javascript
// Sentry Integration
npm install @sentry/react

// main.tsx
import * as Sentry from "@sentry/react";

Sentry.init({
  dsn: "YOUR_SENTRY_DSN",
  environment: "production",
  integrations: [
    new Sentry.BrowserTracing(),
  ],
  tracesSampleRate: 0.1,
});
```

---

## üéØ CHECKLIST PR√â-PRODUCTION

### Backend
- [x] Supabase Pro activ√©
- [x] Tables cr√©√©es et test√©es
- [x] Edge Functions d√©ploy√©es
- [x] RLS policies configur√©es
- [x] Backups automatiques activ√©s
- [ ] Monitoring configur√©
- [ ] Rate limiting configur√©

### Frontend
- [x] Build production optimis√©
- [x] Variables env production
- [x] CSP headers configur√©s
- [x] D√©ploy√© sur Supabase Storage
- [ ] Domaine personnalis√©
- [ ] CDN configur√©
- [ ] Analytics install√©s

### VAPI
- [x] Assistant Paul configur√©
- [x] Webhook URL production
- [x] Num√©ro de t√©l√©phone actif
- [ ] Fallback assistant
- [ ] Monitoring appels

---

## üö® ROLLBACK PROCEDURE

### Si probl√®me en production:
```bash
# 1. Rollback immediat vers version stable
git checkout [last-stable-commit]
cd frontend && npm run build
node ../deploy-to-supabase.js

# 2. Investiguer en dev
git checkout main
npm run dev
# Fix issues...

# 3. Redeploy apr√®s fix
npm run build
node deploy-to-supabase.js
```

---

## üìû URLS IMPORTANTES

### Production
- **Frontend**: https://phiduqxcufdmgjvdipyu.supabase.co/storage/v1/object/public/web-app/drain-fortin/index.html
- **API**: https://phiduqxcufdmgjvdipyu.supabase.co/rest/v1
- **Webhook VAPI**: https://phiduqxcufdmgjvdipyu.supabase.co/functions/v1/vapi-webhook
- **Phone**: +1 (450) 280-3222

### Administration
- **Supabase**: https://supabase.com/dashboard/project/phiduqxcufdmgjvdipyu
- **VAPI**: https://dashboard.vapi.ai
- **GitHub**: [Votre repo]

---

## ‚úÖ CONCLUSION

Votre application est maintenant **EN PRODUCTION** et accessible mondialement!

**Next steps recommand√©s**:
1. Configurer Vercel pour URL plus courte
2. Ajouter domaine drainfortin.com
3. Installer monitoring (Sentry)
4. Configurer analytics
5. Mettre en place CI/CD avec GitHub

---

*D√©ploiement r√©ussi le 2025-09-09*
*Syst√®me 100% op√©rationnel*